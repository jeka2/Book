<!DOCTYPE html>
<html>
  <head>
    <title>Blocmetrics</title>
    <%= csrf_meta_tags %>

    <%= stylesheet_link_tag    'application', media: 'all', 'data-turbolinks-track': 'reload' %>
    <script src="//code.jquery.com/jquery-1.11.2.min.js"></script>
    <%= javascript_include_tag 'application', 'data-turbolinks-track': 'reload' %>
  <body>
  <header>
    <nav class="navbar navbar-default">
      <div class="container-fluid">
        <a class="navbar-brand" href="/">BookClub</a>
        <% if user_signed_in? %>
          <h5>Welcome, <%= current_user.first_name %> <%=current_user.last_name %></h5>
        <% else %>
          <h5>Welcome, Guest!</h5>
        <% end %>
        <div class="nav nabbar-nav navbar-right">
          <% if user_signed_in? %>
              <div class="pull-right dropdown"><button class="btn    btn-secondary dropdown-toggle" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup= "true" aria-expanded="false"><strong><%= current_user.email %></strong><%= image_tag current_user.avatar.url(:thumb) unless current_user.avatar.blank? %></button>
                <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                  <ul class="dropdown-actions list-unstyled">
                    <li><a class="dropdown-item" href="/users/edit">Edit Profile</a></li>
                    <li><a class="dropdown-item" href="/users/sign_out">Sign Out</a></li>
                  </ul>
                </div>
              </div>
            </div>
            <%= form_with url: search_path, local: true, method: :get do |f|%>
              <%= f.text_field :q, placeholder: "Search", data: { behavior: "autocomplete" }, class: "form-control mr-sm-2" %>
              <%= f.button "Search", id: 'search', class: 'btn btn-outline-success my-2 my-sm=0' %>
            <% end %>
          </div>
        </nav>

          <% else %>
            <%= link_to "Sign Up", new_user_registration_path, :class => 'navbar-link'  %> -
            <%= link_to "Sign In", new_user_session_path, :class => 'navbar-link'  %>
      <% end %>
        </ul>
      </div>
    </nav>
  </header>
    <% if flash[:notice] %>
         <div class="alert alert-success">
           <button type="button" class="close" data-dismiss="alert">&times;</button>
           <%= flash[:notice] %>
         </div>
    <% elsif flash[:alert] %>
         <div class="alert alert-warning">
           <button type="button" class="close" data-dismiss="alert">&times;</button>
           <%= flash[:alert] %>
         </div>
    <% end %>
    <div class="container">
      <%= yield %>
    </div>
  </body>
</html>
